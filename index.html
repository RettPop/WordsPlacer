<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script src="./js/Crossworder.js"></script>

<style>
.center {
    text-align: center;
    margin: auto;
    width: 30%;
    border: 3px solid #73AD21;
    padding: 10px;
}
</style>


<title>Test wordplacer</title>
</head>
<script>
function place()
{
    var descr = document.getElementById("crosswords");
    while (descr.childNodes.length > 0) {
        descr.removeChild(descr.childNodes[0]);
    }

    //["АЛЬКОР", "ТРУБА", "ОСЬМИЗНАК", "ВЕНТИЛЯТ", "грымза", "два", "крыша", "СЕМЕНЫЧ", "ЯБЛОКО", "НЕМЕЦ", "УХО", "КНИГА", "ВЕТЕР", "ОКНО", "СИНИЙ"]
    //АЛЬКОР, ТРУБА, ОСЬМИЗНАК, ВЕНТИЛЯТ, грымза, два, крыша, СЕМЕНЫЧ, ЯБЛОКО, НЕМЕЦ, УХО, КНИГА, ВЕТЕР, ОКНО, СИНИЙ
    let matrixSize = parseInt(document.getElementById("matrixSize").value, 10);
    let wordsList = document.getElementById("wordsList").value;
    
    var result = Crossworder.placeWords(wordsList, [], matrixSize);
    for ( let idx=0; idx<50; idx++ ) {
    	let tmpResult = Crossworder.placeWords(wordsList, [], matrixSize);
    	if( result.placed.length < tmpResult.placed.length ) {
    		result = tmpResult;
    	}
    }
       
    // print result matrix for debug purposes
    var container = document.getElementById('crosswords');
    var table = document.createElement("table");
    for( let idx=0; idx < result.matrix.length; idx++ ) 
    {
        var tr = document.createElement("tr")
        for( let idy=0; idy < result.matrix[idx].length; idy++ ) 
        {
            var td = document.createElement("td");
            td.innerHTML = result.matrix[idx][idy];
            tr.appendChild(td);
        }
        //document.write("</tr>");
        table.appendChild(tr);
    }
    
    //document.write("</table>");
    container.appendChild(table);

    
    
    var descr = document.getElementById("description");
    while (descr.childNodes.length > 0) {
    	descr.removeChild(descr.childNodes[0]);
    }
    descr.appendChild((function (){ let tmp = document.createElement("p"); tmp.innerText = "Слов размещено " + result.placed.length + ": " + result.placed.sort().join(", "); return tmp; })());
    descr.appendChild((function (){ let tmp = document.createElement("p"); tmp.innerText = "Слов не размещено " + result.notPlaced.length + ": " + result.notPlaced.sort().join(", "); return tmp; })());
}
</script>
<body>

<div id="crosswords" class="center"></div>
<div id="description"></div>
<hr>
<p>
Список слов, разделенных запятой, для размещения.<br />Регистр не важен:<br/> 
<input type="text" id="wordsList" size="90" value="АЛЬКОР, ТРУБА, ОСЬМИЗНАК, ВЕНТИЛЯТ, грымза, два, крыша, СЕМЕНЫЧ, ЯБЛОКО, НЕМЕЦ, УХО, КНИГА, ВЕТЕР, ОКНО, СИНИЙ"><br /><br />
Размер таблицы (по-умолчанию 8):<br/> 
<input type="number" id="matrixSize" size="3" value="8"><br /><br />
<input type="button" onclick = "place()" value="Старт">

</body>
</html>